<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wrenchly ‚Äì Mijn voertuigen</title>
  <style>
    :root {
      --bg: #181818;
      --text: #f5f5f5;
      --card: #262626;
      --border: #333;
      --accent: #8fff91;
      --accent-dark: #73d176;
      --muted: #aaa;
      --danger: #f35a5a;
    }

    body {
      font-family: system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 2rem;
      transition: background 0.3s, color 0.3s;
    }

    h1 { font-size: 2rem; margin-bottom: 1.5rem; }

    /* VEHICLE CARD */
    .vehicle-card {
      display: flex;
      align-items: center;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      width: 100%;
      margin-bottom: 1.5rem;
      transition: transform 0.2s ease;
      cursor: pointer;
    }

    .vehicle-card:hover { transform: scale(1.01); }

    .vehicle-card img {
      width: 220px;
      height: auto;
      border-radius: 10px;
      margin-right: 1.5rem;
    }

    .vehicle-info h2 { margin: 0 0 0.25rem 0; }
    .vehicle-info p { margin: 0.2rem 0; color: var(--muted); }

    /* BUTTONS */
    .btn {
      padding: 0.45rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      border: none;
      transition: all 0.2s;
    }

    .btn-accent { background: var(--accent); color: #000; }
    .btn-dark { background: var(--card); color: var(--text); border: 1px solid var(--border); }

    /* TABLE */
    table {
      width: 100%;
      border-collapse: collapse;
      background: var(--card);
      border-radius: 8px;
      overflow: hidden;
      margin-top: 1rem;
    }

    th, td {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid var(--border);
      text-align: left;
    }

    th {
      background: #202020;
      cursor: pointer;
    }

    tr:hover td { background: #1f1f1f; }

    /* MODALS */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      justify-content: center;
      align-items: center;
      z-index: 100;
    }
    .modal-content {
      background: var(--card);
      padding: 1.5rem;
      border-radius: 8px;
      width: 90%;
      max-width: 420px;
    }

    input, textarea {
      width: 100%;
      margin: 0.5rem 0 1rem 0;
      padding: 0.5rem;
      background: #1f1f1f;
      border: 1px solid var(--border);
      border-radius: 4px;
      color: var(--text);
    }

    .close {
      float: right;
      font-size: 1.3rem;
      cursor: pointer;
    }

    .toast {
      display: none;
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--accent-dark);
      color: #000;
      padding: 0.8rem 1rem;
      border-radius: 8px;
      font-weight: 600;
    }

    .tabs { margin-bottom: 1rem; }
    .tab-btn {
      background: var(--card);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 0.5rem 1rem;
      border-radius: 6px;
      margin-right: 0.5rem;
      cursor: pointer;
    }

    .tab-btn.active {
      background: var(--accent);
      color: #000;
      font-weight: 600;
    }

    .thumbnail {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      object-fit: cover;
      margin-right: 5px;
    }

    @media(max-width:700px){
      .vehicle-card { flex-direction: column; align-items: flex-start; }
      .vehicle-card img { width: 100%; margin-bottom: 1rem; }
    }
  </style>
</head>
<body>
  <h1>Mijn voertuigen</h1>

  <div class="vehicle-card" id="vehicleCard">
    <img src="xc90_2.5t_image.png" alt="Volvo XC90" />
    <div class="vehicle-info">
      <h2>Volvo XC90 2.5T</h2>
      <p>Kenteken: 83-PJ-SC</p>
      <p>Laatst onderhoud: 31-05-2024</p>
      <button class="btn btn-accent" onclick="openDetails()">Bekijk onderhoud</button>
      <button class="btn btn-dark" id="addVehicle">+ Voertuig toevoegen</button>
    </div>
  </div>

  <div id="vehicleDetail" style="display:none;">
    <div style="display:flex; justify-content: space-between; align-items:center;">
      <div class="tabs">
        <button class="tab-btn active" data-tab="reparaties">Reparaties</button>
        <button class="tab-btn" data-tab="service">Serviceboekje</button>
        <button class="tab-btn" data-tab="aanstaand">Aanstaand onderhoud</button>
      </div>
      <div>
        <button class="btn btn-dark" id="exportCsv">Exporteer CSV</button>
        <button class="btn btn-accent" id="uploadBtn">Upload factuur</button>
        <button class="btn btn-accent" id="planBtn">Plan afspraak</button>
      </div>
    </div>

    <table id="reparatiesTable" class="data-table">
      <thead>
        <tr><th>Datum</th><th>Garage</th><th>Omschrijving</th><th>Bedrag</th></tr>
      </thead>
      <tbody>
        <tr><td>03/05/2023</td><td>Garage Naarden</td><td>Remblokken voor vervangen</td><td>‚Ç¨ 295,00</td></tr>
        <tr><td>12/11/2022</td><td>HR Car Improvement</td><td>Airco service + vullen</td><td>‚Ç¨ 125,00</td></tr>
        <tr><td>10/09/2022</td><td>Autoh√ªs Haren</td><td>Accu vervangen</td><td>‚Ç¨ 180,00</td></tr>
        <tr><td>05/06/2022</td><td>Autoh√ªs Haren</td><td>Olie en filter vervangen</td><td>‚Ç¨ 150,00</td></tr>
        <tr><td>15/01/2022</td><td>Autoh√ªs Haren</td><td>Ruitenwissers en verlichting</td><td>‚Ç¨ 75,00</td></tr>
        <tr><td>12/07/2021</td><td>Autoh√ªs Haren</td><td>Remvloeistof vervangen</td><td>‚Ç¨ 85,00</td></tr>
        <tr><td>08/04/2021</td><td>Autoh√ªs Haren</td><td>Banden wissel (zomer)</td><td>‚Ç¨ 50,00</td></tr>
        <tr><td>05/01/2021</td><td>Autoh√ªs Haren</td><td>Kleine beurt + APK</td><td>‚Ç¨ 365,00</td></tr>
        <tr><td>20/04/2020</td><td>Autoh√ªs Haren</td><td>Grote beurt + distributieriem</td><td>‚Ç¨ 850,00</td></tr>
        <tr><td>10/01/2019</td><td>Autoh√ªs Haren</td><td>Banden vervangen</td><td>‚Ç¨ 400,00</td></tr>
        <tr><td>15/03/2018</td><td>Broekhuis Groningen</td><td>Remschijven + blokken achter</td><td>‚Ç¨ 310,00</td></tr>
        <tr><td>01/10/2017</td><td>Autoh√ªs Haren</td><td>Olie, filter en bougies</td><td>‚Ç¨ 175,00</td></tr>
      </tbody>
      <tfoot>
        <tr><td colspan="3"><b>Totaal</b></td><td><b>‚Ç¨ 3.860,00</b></td></tr>
      </tfoot>
    </table>

    <table id="serviceTable" class="data-table" style="display:none;">
      <thead><tr><th>Datum</th><th>Garage</th><th>Type</th><th>Soort</th><th>Kilometerstand</th><th>Status</th></tr></thead>
      <tbody>
        <tr><td>14/02/2006</td><td>Henk Scholten Ede</td><td>Service 30.000 km / 1 jaar</td><td>Kleine beurt</td><td>32.843 km</td><td>‚úÖ Uitgevoerd</td></tr>
        <tr><td>12/02/2007</td><td>Henk Scholten Ede</td><td>Service 60.000 km / 2 jaar</td><td>Kleine beurt</td><td>60.000 km</td><td>‚úÖ Uitgevoerd</td></tr>
        <tr><td>25/02/2008</td><td>Henk Scholten Nijmegen</td><td>Service 90.000 km / 3 jaar</td><td>Kleine beurt</td><td>92.688 km</td><td>‚úÖ Uitgevoerd</td></tr>
        <tr><td>15/04/2009</td><td>Henk Scholten Nijmegen</td><td>Service 120.000 km / 4 jaar</td><td>Grote beurt</td><td>120.889 km</td><td>‚úÖ Uitgevoerd</td></tr>
        <tr><td>25/05/2010</td><td>Henk Scholten Nijmegen</td><td>Service 150.000 km / 5 jaar</td><td>Kleine beurt</td><td>141.744 km</td><td>‚úÖ Uitgevoerd</td></tr>
        <tr><td>04/02/2012</td><td>Henk Scholten Nijmegen</td><td>Service 180.000 km / 6 jaar</td><td>Grote beurt + distributieriem</td><td>174.968 km</td><td>‚úÖ Uitgevoerd</td></tr>
        <tr><td>10/03/2014</td><td>Van Kampen Groningen</td><td>Service 210.000 km / 7 jaar</td><td>Grote beurt</td><td>199.462 km</td><td>‚úÖ Uitgevoerd</td></tr>
        <tr><td>15/01/2016</td><td>Broekhuis Groningen</td><td>Service 240.000 km / 8 jaar</td><td>Kleine beurt</td><td>216.420 km</td><td>‚úÖ Uitgevoerd</td></tr>
        <tr><td>28/06/2017</td><td>Autoh√ªs Haren</td><td>Service 270.000 km / 9 jaar</td><td>Kleine beurt</td><td>239.087 km</td><td>‚úÖ Uitgevoerd</td></tr>
        <tr><td>20/04/2018</td><td>Autoh√ªs Haren</td><td>Service 300.000 km / 10 jaar</td><td>Grote beurt + remmen</td><td>250.567 km</td><td>‚úÖ Uitgevoerd</td></tr>
        <tr><td>11/05/2022</td><td>Autoh√ªs Haren</td><td>Service 330.000 km / 12 jaar</td><td>Kleine beurt</td><td>300.401 km</td><td>‚úÖ Uitgevoerd</td></tr>
        <tr><td>31/05/2024</td><td>Garage Naarden</td><td>Service 360.000 km / 14 jaar</td><td>Grote beurt</td><td>341.763 km</td><td>‚úÖ Uitgevoerd</td></tr>
      </tbody>
      <tfoot><tr><td colspan="6">üìò 12 onderhoudsbeurten geregistreerd</td></tr></tfoot>
    </table>

    <table id="aanstaandTable" class="data-table" style="display:none;">
      <thead><tr><th>Type</th><th>Verwacht bij</th><th>Urgentie</th><th>Kosten</th><th></th></tr></thead>
      <tbody>
        <tr><td>Distributieriem</td><td>380.000 km</td><td>‚ö†Ô∏è Hoog</td><td>‚Ç¨ 850,00</td><td><button class="btn btn-accent" onclick="openPlanModal()">Plan</button></td></tr>
        <tr><td>Remvloeistof verversen</td><td>370.000 km</td><td>üü† Middel</td><td>‚Ç¨ 95,00</td><td><button class="btn btn-accent" onclick="openPlanModal()">Plan</button></td></tr>
        <tr><td>Bougies vervangen</td><td>375.000 km</td><td>üü¢ Laag</td><td>‚Ç¨ 120,00</td><td><button class="btn btn-accent" onclick="openPlanModal()">Plan</button></td></tr>
      </tbody>
      <tfoot><tr><td colspan="3"><b>Geschatte totale kosten</b></td><td colspan="2"><b>‚Ç¨ 1.065,00</b></td></tr></tfoot>
    </table>
  </div>

  <!-- MODALS -->
  <div id="uploadModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('uploadModal')">&times;</span>
      <h3>Nieuwe factuur uploaden</h3>
      <input type="text" placeholder="Omschrijving..." />
      <input type="number" placeholder="Bedrag (‚Ç¨)" />
      <input type="file" id="factuurFile" accept=".jpg,.jpeg,.png,.pdf" multiple onchange="previewUploads(event)" />
      <div id="previewContainer" style="display:flex; flex-wrap:wrap;"></div>
      <button class="btn btn-accent" onclick="showToast()">Opslaan</button>
    </div>
  </div>

  <div id="planModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('planModal')">&times;</span>
      <h3>Afspraak plannen</h3>
      <textarea id="issueText" placeholder="Omschrijf het probleem..."></textarea>
      <input type="file" id="planFile" accept=".jpg,.jpeg,.png" multiple onchange="previewUploads(event)" />
      <div id="aiSuggestion" style="margin-top:1rem; font-size:0.9rem; color:var(--muted);"></div>
      <button class="btn btn-accent" onclick="aiSimulate()">Genereer AI suggestie</button>
      <button class="btn btn-accent" onclick="showToast()">Verzend verzoek</button>
    </div>
  </div>

  <div class="toast" id="toast">‚úÖ Verzoek verzonden</div>

  <script>
    function openDetails(){ document.getElementById('vehicleDetail').style.display='block'; window.scrollTo(0,0); }
    function openModal(id){ document.getElementById(id).style.display='flex'; }
    function closeModal(id){ document.getElementById(id).style.display='none'; }
    function openPlanModal(){ openModal('planModal'); }

    document.getElementById('uploadBtn').onclick=()=>openModal('uploadModal');
    document.getElementById('planBtn').onclick=()=>openModal('planModal');

    document.querySelectorAll('.tab-btn').forEach(btn=>{
      btn.addEventListener('click',()=>{
        document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        const tab=btn.dataset.tab;
        document.getElementById('reparatiesTable').style.display=tab==='reparaties'?'':'none';
        document.getElementById('serviceTable').style.display=tab==='service'?'':'none
